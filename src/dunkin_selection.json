{
  "width": 500,
  "height": 300,
  "data": {
    "url": "https://gist.githubusercontent.com/dwootton/a3c02e0f170d0b84638e014c63d1f908/raw/6a9504ac7ba878f18799e2e3777ca766e4953ddc/dunkins_no_24_hr.csv"
  },
  "projection": {
    "type": "albersUsa"
  },
  "params": [
    {
      "name": "open_dunks",
      "select": {
        "type": "point",
        "on": "timer",
        "predicate": {
          "and": [
            {"field": "open_hour", "lte": "invert('time', anim_clock)"},
            {"field": "close_hour", "gt": "invert('time', anim_clock)"}
          ]
        }
      }
    }
  ],
  "mark": "circle",
  "encoding": {
    "longitude": {
      "field": "longitude",
      "type": "quantitative"
    },
    "latitude": {
      "field": "latitude",
      "type": "quantitative"
    },
    "color": {
      "value": "#FFFAA0"
    },
    "time": {
      "field": "open_datetime",
      "scale": {
        "type": "linear",
        "domain": [0, 23],
        "range": [
          0, 10000
        ]
      }
    }
  },
  "enter" : {
    "opacity":0
  },
  "exit" : {
    "opacity":0
  }
}
